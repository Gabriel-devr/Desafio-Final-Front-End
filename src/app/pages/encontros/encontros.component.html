<section class="encontros-section">
    <div class="container">

        <header class="section-header">
            <h2>Próximos Encontros</h2>
            <p>Participe de rodas de conversa e eventos online.</p>
        </header>

        <div class="cards-grid">
            @for (item of encontros; track $index) {
            <article class="card">
                <div class="card-image" [style.background-color]="item.cor"
                    [style.background-image]="item.imagem ? 'url(' + item.imagem + ')' : 'none'"
                    style="background-size: cover; background-position: center;">

                    @if (!item.imagem) {
                    <span class="material-symbols-outlined icon-placeholder">
                        event
                    </span>
                    }
                </div>

                <div class="card-content">
                    <span class="date">{{ item.data }}</span>
                    <h3>{{ item.titulo }}</h3>
                    <p class="location">
                        <span class="material-symbols-outlined icon-small">
                            {{ item.tipo === 'online' ? 'wifi' : 'location_on' }}
                        </span>
                        {{ item.local }}
                    </p>

                    <button class="btn-participar">
                        Participar
                    </button>
                </div>
            </article>
            }
        </div>
        <div class="map-section">
            <h3 class="mt-5 mb-4 text-center" style="color: var(--primary); font-family: var(--font-heading);">
                Adicionar Novo Encontro
            </h3>

            <div class="form-container"
                style="max-width: 600px; margin: 0 auto 20px auto; display: flex; flex-direction: column; gap: 15px;">
                <input type="text" [(ngModel)]="novoTitulo" placeholder="Título do Encontro (ex: Yoga no Parque)"
                    class="form-control-custom">
                <textarea [(ngModel)]="novaDescricao" placeholder="Descrição breve do evento..." rows="2"
                    class="form-control-custom"></textarea>

                <p class="text-muted text-center small">
                    <span class="material-symbols-outlined"
                        style="vertical-align: middle; font-size: 18px;">touch_app</span>
                    Preencha os dados acima e <strong>clique no mapa</strong> para definir o local e criar o evento.
                </p>
            </div>

            <app-mapa (mapaClick)="adicionarNovoEncontro($event)"></app-mapa>
        </div>
    </div>
</section>